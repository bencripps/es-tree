!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t){o(this,e),this.element=document.querySelector(t)}return i(e,[{key:"get",value:function(e,t,n,o){var i=this,r=document.createElement(e);if(t&&t.forEach(function(e){e&&r.classList.add(i.options.prefix+e)},this),n&&(r.innerHTML=n),o)for(var s in o)r.addEventListener(s,o[s].bind(this));return r}},{key:"isEqual",value:function(e,t,n){return"array"===e&&t.join(",")===n.join(",")?!0:!1}},{key:"ondrop",value:function(e){e.preventDefault()}},{key:"ondragover",value:function(e){e.preventDefault()}}]),e}();n["default"]=r,t.exports=n["default"]},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(e,t,n){for(var o=!0;o;){var i=e,r=t,s=n;a=u=l=void 0,o=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=r,n=s,o=!0}},l=e("./dom-helper.js"),u=o(l),c=function(e){function t(e,n,o){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.element=this.get("li",[],null,null),this.name=e.name,this.children=e.children||[],this.tree=o,this.defaults={dragEvents:[{name:"dragstart",fn:this.ondragstart},{name:"ondrag",fn:this.ondrag},{name:"dragend",fn:this.ondragend},{name:"dragover",fn:this.ondragover},{name:"dragleave",fn:this.ondragover},{name:"drop",fn:this.ondrop}],mouseEvents:[{name:"mouseover",fn:this.showDestroyIcon},{name:"mouseout",fn:this.showDestroyIcon}]},this.options=Object.assign(this.defaults,n),this.element.classList.add(this.options.nodeClass),this.element.appendChild(this.getIcon(e)),this.options.draggable&&this.initDragEvents(),this.element.appendChild(this.getDisplayText(e.name)),this.options.destroyable&&this.addDestroyIcon(),this.initIconEvents(e)}return r(t,e),s(t,[{key:"addDestroyIcon",value:function(){var e=this;this.destroyIcon=this.get("i",[]),this.options.icons.destroyIcon.forEach(function(t){e.destroyIcon.classList.add(t)},this),this.destroyIcon.addEventListener("click",this.destroy.bind(this)),this.options.mouseEvents.forEach(function(t){e.element.addEventListener(t.name,t.fn.bind(e))},this),this.element.appendChild(this.destroyIcon)}},{key:"showDestroyIcon",value:function(e){e.stopPropagation(),this.destroyIcon.classList["mouseover"===e.type?"add":"remove"](this.options.icons.showDestroyIconClass)}},{key:"getDisplayText",value:function(e){return this.get("span",[],e,null)}},{key:"getIcon",value:function(e){var t=this;this.icon=this.get("i",[]);var n=this.getIconClass(e);return n.forEach(function(e){t.icon.classList.add(e)},this),this.icon}},{key:"destroy",value:function(){var e=this.getNodeDataForCustomFunction(this.element),t=this.element.parentNode.parentNode;1===this.toJSON({},t).children.length?(this.element.parentNode.remove(),this.updateIconClasses(t)):this.element.remove(),this.options.afterDestroy&&this.options.afterDestroy.apply(this,e)}},{key:"getIconClass",value:function(e,t){var n;return n=!e.children||e.children.length<1?this.options.icons.noChildren:this.options.expandedOnLoad?this.options.icons.collapseIcon:this.options.icons.expandIcon,t&&(n=this.options.icons.destroyIcon),n}},{key:"initDragEvents",value:function(){var e=this;this.element.setAttribute("draggable",!0),this.options.dragEvents.forEach(function(t){e.element.addEventListener(t.name,t.fn.bind(e))},this)}},{key:"initIconEvents",value:function(){var e=this;this.icon.addEventListener("click",function(t){if(e.isEqual("array",e.options.icons.noChildren,Array.from(e.icon.classList)))return!1;var n=e.isEqual("array",Array.from(e.icon.classList),e.options.icons.expandIcon),o=n?e.options.icons.collapseIcon:e.options.icons.expandIcon,i=n?e.options.afterExpand:e.options.afterCollapse;e.icon.className=o.toString().replace(/,/g," "),e.element.querySelector("ol").classList[n?"add":"remove"](e.options.prefix+"visible"),i&&i.apply(t,e.getNodeDataForCustomFunction(e.element))},this)}},{key:"ondrag",value:function(e){e.preventDefault()}},{key:"ondrop",value:function(e){var t=document.querySelector("."+this.options.nodeCopyClass).parentNode.parentNode;e.stopPropagation(),e.preventDefault(),this.doDrop(e,e.offsetX>this.options.hintWidth),this.handleNodeCopy(!0),this.updateIconClasses(t),this.removeDragoverClass()}},{key:"updateIconClasses",value:function(e){e.querySelector("i").className=this.getIconClass(this.toJSON({},e)).join(" ")}},{key:"isCurrentNodeExpanded",value:function(e){return this.isEqual("array",Array.from(e.querySelector("i").classList),this.options.icons.collapseIcon)||this.isEqual("array",Array.from(e.querySelector("i").classList),this.options.icons.noChildren)}},{key:"doDrop",value:function(e,n){var o,i=JSON.parse(e.dataTransfer.getData("text")),r=this.isCurrentNodeExpanded(document.querySelector("."+this.options.nodeCopyClass)),s=new t(i,this.options,this.tree),a=this.element.previousSibling||this.element.parentNode.parentNode;i.children&&i.children.length>0&&this.addChildNodes(s,i.children,r),n?(o=a,this.addChildNodes({element:o},[i]),this.updateIconClasses(o)):(o=s.element,this.element.parentNode.insertBefore(o,this.element)),r||void 0===r||this.reupdateIconClass(!n,s.element,a),this.options.afterMove&&this.options.afterMove.apply(e,this.getNodeDataForCustomFunction(o))}},{key:"reupdateIconClass",value:function(e,t,n){e?t.querySelector("i").className=this.options.icons.expandIcon.join(" "):console.log(n)}},{key:"addChildNodes",value:function(e,t,n){var o=e.element.querySelector("ol")||this.get("ol",["leaf",n||void 0===n?"visible":null]);this.tree.buildHTML.call(this.tree,t,o),e.element.querySelector("ol")||e.element.appendChild(o)}},{key:"removeDragoverClass",value:function(){var e=this;Array.from(document.querySelectorAll("."+this.options.nodeClass)).forEach(function(t){t.classList.remove(e.options.dragoverClass)},this)}},{key:"toJSON",value:function(e,t){var n=this;return e.name=t.querySelector("span").innerHTML,e.children=[],Array.from(t.querySelectorAll("li")).forEach(function(o){o.parentNode.parentNode.isSameNode(t)&&e.children.push(n.toJSON({},o))},this),e}},{key:"ondragstart",value:function(e){e.stopPropagation(),e.dataTransfer.setData("text",JSON.stringify(this.toJSON({},this.element))),e.target.classList.add(this.options.nodeCopyClass)}},{key:"ondragover",value:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",this.element.classList["dragover"===e.type?"add":"remove"](this.options.dragoverClass)}},{key:"handleNodeCopy",value:function(e){var t=document.querySelector("."+this.options.nodeCopyClass),n=t.parentNode.querySelectorAll("li").length>1;e&&!n?t.parentNode.remove():e?t.remove():t.classList.remove(this.options.nodeCopyClass)}},{key:"ondragend",value:function(){}},{key:"getNodeDataForCustomFunction",value:function(e){return[e,this.toJSON({},e)]}}]),t}(u["default"]);n["default"]=c,t.exports=n["default"]},{"./dom-helper.js":1}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=function(e,t,n){for(var o=!0;o;){var i=e,r=t,s=n;a=u=l=void 0,o=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var u=Object.getPrototypeOf(i);if(null===u)return void 0;e=u,t=r,n=s,o=!0}},l=e("./dom-helper.js"),u=o(l),c=e("./tree-node.js"),d=o(c),h="es-tree-",p=h+"node",f=h+"node-copy",v=h+"dragover",y="top-level",m=60,g=["fa","fa-plus",h+"icon"],C=["fa","fa-minus",h+"icon"],b=["fa","fa-circle-thin",h+"icon"],O=["fa","fa-remove",h+"icon",h+"remove"],E=h+"show",N=function(){},I=function(){},k=function(){},D=function(){},L=!0,j=!0,w=!0,x=function(e){function t(e,n,o){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.data=n,this.verify(e),this.defaults={nodeClass:p,prefix:h,topLevelClass:y,nodeCopyClass:f,dragoverClass:v,hintWidth:m,icons:{expandIcon:g,collapseIcon:C,noChildren:b,destroyIcon:O,showDestroyIconClass:E},draggable:L,destroyable:j,expandedOnLoad:w,afterDestroy:N,afterExpand:I,afterCollapse:k,afterMove:D},this.options=Object.assign(this.defaults,o),this.init()}return r(t,e),s(t,[{key:"verify",value:function(e){if(!this.element)throw Error("No document node with "+e+" selector could be found!");if(!this.data)throw Error("Data must been provided in order to build tree!")}},{key:"init",value:function(){this.createTitle(),this.setup(),this.buildHTML(this.data.nodes,this.startOL),this.element.appendChild(this.treeFragment)}},{key:"setup",value:function(){this.treeFragment=document.createDocumentFragment(),this.startOL=this.get("ol",["leaf","visible",this.options.topLevelClass],null),this.treeFragment.appendChild(this.startOL)}},{key:"buildHTML",value:function(e,t){var n,o,i=this,r=["leaf"];this.options.expandedOnLoad&&r.push("visible"),e.forEach(function(e){n=new d["default"](e,i.options,i),t.appendChild(n.element),e.children&&e.children.length>0&&(o=i.get("ol",r,null),i.buildHTML(e.children,o),n.element.appendChild(o))},this)}},{key:"createTitle",value:function(){var e=this.get("div",["title"],this.data.title);this.element.appendChild(e)}}]),t}(u["default"]);n["default"]=x,t.exports=n["default"]},{"./dom-helper.js":1,"./tree-node.js":2}]},{},[3]);